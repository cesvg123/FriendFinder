<!doctype html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Contact | Your Name</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:100,100i,300,400,400i,600,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" a href="./" class="text-center">Friend Finder</a>
    </nav>
    <div>
        <h4 class="panel"><strong>Survey to find Friends</strong></h4>
    </div>
    <form role="form" class="friend-form">
        <h4><strong>About you</strong></h4>
        <h4>Name</h4>
        <input type="text" name="" id="formName" class="form-control" required>

        <h4>Photograph</h4>
        <input type="text" name="" id="formPhotograph" class="form-control" required>

        <h4><strong>Survey Questions</strong></h4>
        <Div>
            <h4>You would like to have a friend who is there for you?</h4>
            <select data-placeholder="" class="chosen-select" id="q1">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Are you a fun person?</h4>
            <select data-placeholder="" class="chosen-select" id="q2">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Do you like to dance?</h4>
            <select data-placeholder="" class="chosen-select" id="q3">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Do you like to watch movies?</h4>
            <select data-placeholder="" class="chosen-select" id="q4">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Do you like to exercise?</h4>
            <select data-placeholder="" class="chosen-select" id="q5">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Do you have a kid?</h4>
            <select data-placeholder="" class="chosen-select" id="q6">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4>Are you easy going?</h4>
            <select data-placeholder="" class="chosen-select" id="q7">
                <option value=""></option>
                <option selected="selected" value="1"> 1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </Div>
        <br>
        <div>
            <button type="submit" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">
                Submit </button>
        </div>
        <br>

    </form>



    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h2 class="modal-title"><strong>Your new friend</strong></h2>
                </div>

                <div class="modal-body">
                    <h2 id="matchName"></h2>
                    <img id="matchImage" src="https://lorempixel.com/200/200/" alt="No image">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $(".friend-form").on("submit", function (event) {
                event.preventDefault();
                console.log('submitted')

                if (newForm() == true) {
                    var newFriend = {
                        name: $("#formName").val().trim(),
                        Photograph: $("#formPhotograph").val().trim(),
                        scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(),
                            $("#q5").val(), $("#q6").val(), $("#q7").val(),
                        ]
                    };

                    $.post("/api/friend", newFriend, function (data) {
                        console.log(data.name)
                        $("#matchName").text(data.name);
                        $("#matchImage").attr("src", data.Photograph);
                        $("#modalResult").modal("toggle");
                    });

                    $('#name').val("");
                    $('#Photograph').val("");
                    $('#q1').val("");
                    $('#q2').val("");
                    $('#q3').val("");
                    $('#q4').val("");
                    $('#q5').val("");
                    $('#q6').val("");
                    $('#q7').val("");

                } else {
                    alert("please complete all fields")
                }

            });

            function newForm() {
                var formCompleted = true;
                $(".form-control").each(function () {
                    if ($(this).val() === "") {
                        formCompleted = false;
                    }
                });
                $(".select").each(function () {
                    if ($(this).val() === "") {
                        formCompleted = false;
                    }
                })
                return formCompleted;
            }
        });
    </script>

</body>

</html>